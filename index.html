
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Host de Servidores</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Fondo animado -->
  <div class="background"></div>

  <div class="container">
    <h1>Host de Servidores</h1>
    <p>Gestiona tus servidores de forma rápida y sencilla.</p>

    <!-- Sección: Servidores -->
    <section class="server-section">
      <h2>Servidores Disponibles</h2>

      <div class="server-card" onclick="fetchServerStatus('bedrock', '192.168.1.1')">
        <h3>Minecraft Bedrock</h3>
        <p>IP: 192.168.1.1:19132</p>
        <p id="bedrock-status">Cargando...</p>
      </div>

      <div class="server-card" onclick="fetchServerStatus('java', '192.168.1.1')">
        <h3>Minecraft Java</h3>
        <p>IP: 192.168.1.1:25565</p>
        <p id="java-status">Cargando...</p>
      </div>

      <div class="server-card" onclick="showServer('other')">
        <h3>Otro Servidor</h3>
        <p>IP: 192.168.1.1:25565</p>
        <p>Estado: <strong class="status-online">Online</strong></p>
      </div>

      <button onclick="createServer()">Crear Servidor</button>
    </section>

    <!-- Detalles del servidor -->
    <section id="server-details" class="server-details" style="display: none;">
      <h2 id="server-title">Detalles del Servidor</h2>
      <p id="server-ip">IP: 192.168.1.1:19132</p>
      <p id="server-type">Tipo: Minecraft Bedrock</p>
      <p id="server-status">Estado: <strong class="status-online">Online</strong></p>
      <p id="server-version">Versión: 1.19.8</p>
      <p id="server-players">Jugadores: 2/20</p>
      <p>Uptime: 24/7</p>
      <button onclick="goBack()">Volver</button>
    </section>

    <!-- Formulario para crear servidor -->
    <section id="create-server-form" class="server-details" style="display: none;">
      <h2>Crear Nuevo Servidor</h2>
      <form onsubmit="submitServer(event)">
        <label for="server-name">Nombre del Servidor:</label>
        <input type="text" id="server-name" required><br>
        <label for="server-type">Tipo de Servidor:</label>
        <select id="server-type">
          <option value="bedrock">Minecraft Bedrock</option>
          <option value="java">Minecraft Java</option>
          <option value="other">Otro Juego</option>
        </select><br>
        <label for="server-ip">IP del Servidor:</label>
        <input type="text" id="server-ip" required><br>
        <button type="submit">Crear</button>
      </form>
    </section>

    <!-- Repositorio de servidores -->
    <section id="server-repo" class="server-details" style="display: none;">
      <h2>Repositorio de Servidores</h2>
      <ul id="server-list"></ul>
    </section>
  </div>

  <script>
    // Cargar servidores desde localStorage
    function loadServersFromStorage() {
      const servers = JSON.parse(localStorage.getItem("servers")) || [];
      const list = document.getElementById("server-list");
      list.innerHTML = "";

      if (servers.length === 0) {
        list.innerHTML = "<li>No hay servidores guardados.</li>";
        return;
      }

      servers.forEach((server, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
          <strong>${server.name}</strong> - ${server.type}
          <p>IP: ${server.ip}</p>
          <button onclick="useServer(${index})">Usar</button>
        `;
        list.appendChild(li);
      });
    }

    // Usar un servidor guardado
    function useServer(index) {
      const servers = JSON.parse(localStorage.getItem("servers")) || [];
      const server = servers[index];

      showServerDetails(server);
      document.getElementById("server-repo").style.display = "none";
    }

    // Mostrar detalles del servidor
    function showServerDetails(server) {
      const details = document.getElementById("server-details");
      const title = document.getElementById("server-title");
      const ip = document.getElementById("server-ip");
      const typeText = document.getElementById("server-type");
      const status = document.getElementById("server-status");
      const version = document.getElementById("server-version");
      const players = document.getElementById("server-players");

      title.textContent = server.name;
      ip.textContent = "IP: " + server.ip;
      typeText.textContent = "Tipo: " + server.type;
      status.textContent = "Estado: <strong class='status-online'>Online</strong>";
      version.textContent = "Versión: 1.19.8";
      players.textContent = "Jugadores: 2/20";

      details.style.display = "block";
    }

    function fetchServerStatus(type, ip) {
      if (type === "bedrock") {
        fetch(`https://api.mcsrvstat.us/bedrock/ ${ip}`)
          .then(res => res.json())
          .then(data => {
            document.getElementById("bedrock-status").textContent = data.status ? "Online" : "Offline";
            document.getElementById("bedrock-status").className = data.status ? "status-online" : "status-offline";
            document.getElementById("server-details").style.display = "block";
            showServerDetails({ name: "Bedrock Server", type: "bedrock", ip: ip });
          });
      } else if (type === "java") {
        fetch(`https://api.mcsrvstat.us/java/ ${ip}`)
          .then(res => res.json())
          .then(data => {
            document.getElementById("java-status").textContent = data.status ? "Online" : "Offline";
            document.getElementById("java-status").className = data.status ? "status-online" : "status-offline";
            document.getElementById("server-details").style.display = "block";
            showServerDetails({ name: "Java Server", type: "java", ip: ip });
          });
      }
    }

    function createServer() {
      document.getElementById("server-details").style.display = "none";
      document.getElementById("create-server-form").style.display = "block";
    }

    function showServer(type) {
      const details = document.getElementById("server-details");
      const title = document.getElementById("server-title");
      const ip = document.getElementById("server-ip");
      const typeText = document.getElementById("server-type");
      const status = document.getElementById("server-status");
      const version = document.getElementById("server-version");
      const players = document.getElementById("server-players");

      if (type === "bedrock") {
        title.textContent = "Minecraft Bedrock";
        ip.textContent = "IP: 192.168.1.1:19132";
        typeText.textContent = "Tipo: Minecraft Bedrock";
        status.textContent = "Estado: <strong class='status-online'>Online</strong>";
        version.textContent = "Versión: 1.19.8";
        players.textContent = "Jugadores: 2/20";
      } else if (type === "java") {
        title.textContent = "Minecraft Java";
        ip.textContent = "IP: 192.168.1.1:25565";
        typeText.textContent = "Tipo: Minecraft Java";
        status.textContent = "Estado: <strong class='status-online'>Online</h1>";
        version.textContent = "Versión: 1.19.8";
        players.textContent = "Jugadores: 2/20";
      } else {
        title.textContent = "Servidor Personalizado";
        ip.textContent = "IP: 192.168.1.1:25565";
        typeText.textContent = "Tipo: Otro Juego";
        status.textContent = "Estado: <strong class='status-online'>Online</strong>";
        version.textContent = "Versión: 1.19.8";
        players.textContent = "Jugadores: 2/24";
      }

      details.style.display = "block";
    }

    function goBack() {
      document.getElementById("server-details").style.display = "none";
    }

    function showServerList() {
      document.getElementById("server-details").style.display = "none";
      document.getElementById("server-repo").style.display = "block";
      loadServersFromStorage();
    }

    function submitServer(e) {
      e.preventDefault();
      const name = document.getElementById("server-name").value;
      const type = document.getElementById("server-type").value;
      const ip = document.getElementById("server-ip").value;

      const server = { name, type, ip };
      let servers = JSON.parse(localStorage.getItem("servers")) || [];
      servers.push(server);
      localStorage.setItem("servers", JSON.stringify(servers));

      alert(`Servidor creado:\nNombre: ${name}\nTipo: ${type}\nIP: ${ip}`);

      document.getElementById("create-server-form").style.display = "none";
      document.getElementById("server-details").style.display = "block";
    }

    function showServerDetails(server) {
      const details = document.getElementById("server-details");
      const title = document.getElementById("server-title");
      const ip = document.getElementById("server-ip");
      const typeText = document.getElementById("server-type");
      const status = document.getElementById("server-status");
      const version = document.getElementById("server-version");
      const players = document.getElementById("server-players");

      title.textContent = server.name;
      ip.textContent = "IP: " + server.ip;
      typeText.textContent = "Tipo: " + server.type;
      status.textContent = "Estado: <strong class='status-online'>Online</strong>";
      version.textContent = "Versión: 1.19.8";
      players.textContent = "Jugadores: 2/20";

      details.style.display = "block";
    }

    // Cargar servidores al iniciar
    window.onload = () => {
      const servers = JSON.parse(localStorage.getItem("servers")) || [];
      if (servers.length > 0) {
        document.getElementById("server-repo").style.display = "block";
        loadServersFromStorage();
      }
    };
  </script>

</body>
</html>
